# Introduction to Data Analytics

## Loading and Inspecting Data Sets
<hr>

The following line of code reads in the Bank Marketing data set from the UCI Machine Learning Repository (https://archive.ics.uci.edu/ml/index.php).


```{r}
bank = read.csv("bank.csv", sep=";")
```

Notice we used the `sep=` option to specify the delimiter used in our data file (which is a semicolon ";" in the bank data).

We always want to view the data after importing to make sure all the values were read-in correctly. To inspect the first few lines of a data set, use the `head( )` command.

```{r results="hide"}
head(bank)
```

```{r echo=FALSE}
head(bank) %>% 
  kable() %>%
  kable_styling(font_size = 10) %>%
  scroll_box(width = "100%")
```

Finally, we need to attach the data set so that R knows where to find the variables we want to analyze (e.g., age, default, balance).

```{r}
attach(bank)
```

Now we can access/view any of the variables by typing their name. For example, let's look at the first 10 observations of the balance variable.


```{r}
balance[1:10]
```

<br>

## Statistical Summaries
<hr>

We can perform a variety of statistical summaries on our data using R's built-in functions. A summary of commonly used statistical functions is provided below.

```{r echo=FALSE}
names = c("mean","median","variance","standard deviation","correlation")
functions = c("`mean( )`","`median( )`","`var( )`","`sd( )`","`cor( )`")
dt = data.frame(names,functions)
names(dt) = c("Statistic","R Function")
dt %>%
  kable() %>%
  kable_styling(full_width = FALSE)
```

For example, we can compute the mean of the balance variable using the `mean( )` function.


```{r}
mean(balance)
```


Now suppose we wanted to find the average balance for individuals who have a level of education equal to `primary`. To do this, we first need to pull the subset of balance observations where education is equal to `primary`. 


```{r results="hide"}
balance[education=="primary"]
```

Here the closed brackets `[ ]` allow us to subset the data. We are interested in the balance variable, but now we only want the observations where the condition stated inside the brackets is satisfied.

Note: a double equals sign `==` is always used when writing logical statements to check equality.

Now we can use the `mean( )` function to compute the desired average of balance conditional on a primary education.


```{r}
mean(balance[education=="primary"])
```

An all-purpose way to compute averages across different factor levels is to use the `aggregate( )` function. The first argument specifies the variable we want to average and associated categorical/factor variable, and the second argument specifies the function we want to execute (i.e., the mean).


```{r results="hide"}
aggregate(balance ~ education, FUN=mean)
```

```{r echo=FALSE}
aggregate(balance ~ education, FUN=mean) %>%
  kable() %>%
  kable_styling(full_width=F)
```

<br>

## Graphical Summaries
<hr>

Creating visual data summaries in R is also one of its strengths. Examples of useful graphical functions include `hist( )`, `boxplot( )`, `plot( )`, `pie( )`, `barplot( )`.

An example of a **histogram** of yearly balances is shown below.


```{r}
hist(balance, main="Average Yearly Balance (in euros)")
```


Here the `main=` option allows us to customize the plot title. We can also use the `breaks=` option to control the bin width.

```{r}
hist(balance, main="Average Yearly Balance (in euros)", breaks=50)
```


We can also use a **boxplot** to look at the distribution of balance. To do this, we'll use the `boxplot( )` function.


```{r}
boxplot(balance)
```


Notice how the extreme positive values (outliers) make the boxplot hard to analyze. We can remove these outliers with the `outline=FALSE` option.


```{r}
boxplot(balance, outline=FALSE)
```

We can also use the `boxplot( )` function to compare the distribution of balances across education levels.


```{r}
boxplot(balance ~ education, outline=FALSE, xlab="education", ylab="yearly balance")
```


The first argument here tells R that we want to plot balance against education. Note that the numeric variable (e.g., balance) must always come before the factor variable (e.g., education). Weâ€™ve also added labels to the x and y-axes using the `xlab=` and `ylab=` options.

We can create **scatter plots** using the `plot( )` function.

```{r}
plot(age, balance)
```

The first argument corresponds to the variable on the x-axis, while the second corresponds to the variable on the y-axis.

We can also incorporate information from a third factor variable by adding color to the scatter plot. For example, suppose we wanted to see who currently has a loan with the bank.


```{r}
plot(age, balance, col=ifelse(loan=="no",8,4), pch=ifelse(loan=="no",1,16))
legend("topleft", legend=c("no","yes"), pch=c(1,16), col=c(8,4), title="loan")
```


The `col=` option in the first line adds color to each dot conditional on the value of the term deposit variable y. The `ifelse(loan=="no",8,4)` condition reads if `loan` is equal to `no`, then the color should be equal to 8 (gray) otherwise it equals 4 (blue). Conditional formatting is also applied to the point type option `pch` where a value of 1 is an open circle and a value of 16 is a closed circle.

The second line adds a legend to the plot so that we know what the colors correspond to. The first argument indicates the legend position, the second argument `legend` indicates the values to be shown on the legend, the third argument `pch` is the point type, the fourth argument `col` is the color for each value, and the fifth argument `title` adds a custom title.

```{r echo=FALSE}
detach(bank)
```